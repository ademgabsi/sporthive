{% extends 'base.html.twig' %}

{% block title %}{{ tournoi.nom }}{% endblock %}

{% block body %}
<div class="tournament-detail-container">
  <div class="tournament-detail-header">
    <h1>{{ tournoi.nom }}</h1>
  </div>

  <div class="tournament-detail-card">
    <div class="detail-row">
      <div class="detail-label">Nom</div>
      <div class="detail-value">{{ tournoi.nom }}</div>
    </div>

    <div class="detail-row">
      <div class="detail-label">Date de début</div>
      <div class="detail-value date-value">
        <svg class="date-icon" viewBox="0 0 24 24">
          <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
        </svg>
        {{ tournoi.dateDebut ? tournoi.dateDebut|date('Y-m-d') : '' }}
      </div>
    </div>

    <div class="detail-row">
      <div class="detail-label">Date de fin</div>
      <div class="detail-value date-value">
        <svg class="date-icon" viewBox="0 0 24 24">
          <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
        </svg>
        {{ tournoi.dateFin ? tournoi.dateFin|date('Y-m-d') : '' }}
      </div>
    </div>

    <div class="detail-row">
      <div class="detail-label">Lieu</div>
      <div class="detail-value">
        <svg class="location-icon" viewBox="0 0 24 24">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
        <a href="#" onclick="openMap('{{ tournoi.lieu|e('js') }}')" class="location-link">
          {{ tournoi.lieu }}
        </a>
      </div>
    </div>
  </div>

  <a href="{{ path('app_tournoi_index') }}" class="back-link">
    <svg class="back-icon" viewBox="0 0 24 24">
      <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
    </svg>
    Retour à la liste
  </a>
</div>

<script>
function openMap(destination) {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            var origin = latitude + "," + longitude;
            var directionsUrl = "https://www.google.com/maps/dir/?api=1&origin=" + encodeURIComponent(origin) + "&destination=" + encodeURIComponent(destination) + "&travelmode=driving";
            window.open(directionsUrl, "_blank");
        }, function(error) {
            alert("Impossible de récupérer votre position actuelle.");
        });
    } else {
        alert("La géolocalisation n'est pas prise en charge par votre navigateur.");
    }
}
</script>
{% endblock %}
