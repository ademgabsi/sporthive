<!DOCTYPE html>
<html>
	<head>
		<!-- Basic -->
		<meta charset="utf-8"/>
		<meta
		http-equiv="X-UA-Compatible" content="IE=edge"/>
		<!-- Mobile Metas -->
		<meta
		name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
		<!-- Site Metas -->
		<meta name="keywords" content=""/>
		<meta name="description" content=""/>
		<meta name="author" content=""/>
		<meta name="csrf-token" content="{{ csrf_token('profanity_check') }}"/>

		<title>
			{% block title %}SPORTHIVE
			{% endblock %}
		</title>

		<!-- slider stylesheet -->
		<link
		rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>

		<!-- bootstrap core css -->
		<link
		rel="stylesheet" type="text/css" href="{{ asset('css/bootstrap.css') }}"/>

		<!-- fonts style -->
		<link
		href="https://fonts.googleapis.com/css?family=Poppins:400,600,700&display=swap" rel="stylesheet">
		<!-- Font Awesome icons -->
		<link
		rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
		<!-- Custom styles for this template -->
		<link
		href="{{ asset('css/style.css') }}" rel="stylesheet"/>
		<!-- responsive style -->
		<link href="{{ asset('css/responsive.css') }}" rel="stylesheet"/>
		<!-- chatbot style -->
		<link href="{{ asset('css/chatbot.css') }}" rel="stylesheet"/>
		{% block css %}{% endblock %}
		</head>

		<body>
			<div
				class="hero_area">
				<!-- header section strats -->
				{% block header %}
					<header class="header_section">
						<div class="container-fluid">
							<nav class="navbar navbar-expand-lg custom_nav-container ">
								<a class="navbar-brand" href="{{ path('app_home') }}">
									<span>
										SPORTHIVE
									</span>
								</a>
								<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
									<span class="navbar-toggler-icon"></span>
								</button>

								<div class="collapse navbar-collapse" id="navbarSupportedContent">
									<div class="d-flex ml-auto flex-column flex-lg-row align-items-center">
										<ul class="navbar-nav">
											<li class="nav-item {% if app.request.attributes.get('_route') == 'app_home' %}active{% endif %}">
												<a class="nav-link" href="{{ path('app_home') }}">Accueil
													<span class="sr-only">(current)</span>
												</a>
											</li>
											<li class="nav-item {% if app.request.attributes.get('_route') starts with 'app_assurance' %}active{% endif %}">
												<a class="nav-link" href="{{ path('app_assurance_index') }}">
													Assurance
												</a>
											</li>
											<li class="nav-item {% if app.request.attributes.get('_route') starts with 'app_reclamation' %}active{% endif %}">
												<a class="nav-link" href="{{ path('app_reclamation_index') }}">
													Reclamation
												</a>
											</li>

											<li class="nav-item">
												<a class="nav-link" href="{{path('index_front')}}">Equipes</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" href="{{path('index_front_joueur')}}">Joueurs</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" href="#">
													Competition</a>
											</li>
											<li class="nav-item {% if app.request.attributes.get('_route') starts with 'app_match_front' %}active{% endif %}">
												<a class="nav-link" href="{{ path('app_match_front_index') }}">
													Match</a>
											</li>
											<li class="nav-item {% if app.request.attributes.get('_route') starts with 'app_sponsor_front' %}active{% endif %}">
												<a class="nav-link" href="{{ path('app_sponsor_front_index') }}">
													Sponsor</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" href="#">
													Terrain</a>
											</li>
											<li class="nav-item">
												<a class="nav-link" href="#">
													Contact</a>
											</li>
										</ul>
										<div class="user_option d-flex align-items-center">
											<form class="form-inline my-2 my-lg-0 ml-0 ml-lg-4 mb-3 mb-lg-0">
												<button class="btn my-2 my-sm-0 nav_search-btn" type="submit"></button>
											</form>
											{% if app.user %}
												<div class="dropdown">
													<button class="btn btn-outline-light dropdown-toggle ml-2" type="button" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
														<i class="fa fa-user mr-1"></i>
														{{ app.user.prenom }}
													</button>
													<div class="dropdown-menu dropdown-menu-right bg-white" aria-labelledby="userDropdown">
														<a class="dropdown-item text-dark" href="{{ path('app_profile') }}">
															<i class="fa fa-user-circle mr-2"></i>
															Mon profil
														</a>
														{% if is_granted('ROLE_ADMIN') %}
															<a class="dropdown-item text-dark" href="{{ path('app_admin_dashboard') }}">
																<i class="fa fa-cogs mr-2"></i>
																Administration
															</a>
														{% endif %}
														<div class="dropdown-divider"></div>
														<a class="dropdown-item text-dark" href="{{ path('app_logout') }}">
															<i class="fa fa-sign-out-alt mr-2"></i>
															Déconnexion
														</a>
													</div>
												</div>
											{% else %}
												<div class="ml-3">
													{% if app.request.attributes.get('_route') == 'app_login' %}
														<a href="{{ path('app_register') }}" class="btn btn-danger">
															<i class="fa fa-user-plus mr-1"></i>
															Inscription
														</a>
													{% else %}
														<a href="{{ path('app_login') }}" class="btn btn-danger">
															<i class="fa fa-sign-in-alt mr-1"></i>
															Connexion
														</a>
													{% endif %}
												</div>
											{% endif %}
										</div>
									</div>
								</div>
							</nav>
						</div>
					</header>
					<section class=" slider_section position-relative">
						<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
							<div class="carousel-inner">
								<div class="carousel-item active">
									<div class="container">
										<div class="col-lg-10 col-md-11 mx-auto">
											<div class="detail-box">
												<div>
													<h3>
														Fitness
													</h3>
													<h2>
														Training
													</h2>
													<h1>
														Sporthive
													</h1>
													<p>
														Votre chemin vers le sport parfait , Tout en un seul clic !
													</p>
													<div class="">
														<a href="#">
															Contact Us
														</a>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

							</div>
							<ol class="carousel-indicators">
								<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
							</ol>
						</div>
					</section>
				{% endblock %}
				<!-- end header section -->
			</div>

			{% block body %}
				<section class="us_section layout_padding">
					<div class="container">
						<div class="heading_container">
							<h2>
								Pourquoi Choisir Sporthive ?
							</h2>
						</div>

						<div class="us_container">
							<div class="row">
								<div class="col-lg-3 col-md-6">
									<div class="box">
										<div class="img-box">
											<img src="images/u-1.png" alt="">
										</div>
										<div class="detail-box">
											<h5>
												RÉSERVATION DE TERRAIN
											</h5>
											<p>
												Réservez un terrain en quelques clics selon votre sport préféré et votre créneau idéal.
											</p>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="box">
										<div class="img-box">
											<img src="images/u-4.png" alt="">
										</div>
										<div class="detail-box">
											<h5>
												REJOINDRE UNE ÉQUIPE
											</h5>
											<p>
												Rejoignez une équipe existante ou créez la vôtre pour jouer en groupe et progresser ensemble.
											</p>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="box">
										<div class="img-box">
											<img src="images/u-2.png" alt="">
										</div>
										<div class="detail-box">
											<h5>
												ASSURANCE & RÉCLAMATIONS
											</h5>
											<p>
												Souscrivez une assurance sportive et gérez vos réclamations en toute simplicité depuis l’appli.
											</p>
										</div>
									</div>
								</div>
								<div class="col-lg-3 col-md-6">
									<div class="box">
										<div class="img-box">
											<img src="images/u-3.png" alt="">
										</div>
										<div class="detail-box">
											<h5>
												COMPÉTITIONS SPORTIVES
											</h5>
											<p>
												Participez à des compétitions organisées par la salle et affrontez d’autres équipes !
											</p>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<section class="heathy_section layout_padding">
					<div class="container">
						<div class="row">
							<div class="col-md-12 mx-auto">
								<div class="detail-box">
									<h2>
										UNE EXPÉRIENCE SPORTIVE COMPLÈTE
									</h2>
									<p>
										Notre plateforme vous offre bien plus qu’un simple espace sportif. Réservez vos terrains en toute simplicité, rejoignez des équipes dynamiques, participez à des compétitions passionnantes, et assurez votre pratique grâce à une gestion facile des assurances et des réclamations. Que vous soyez amateur ou compétiteur, nous avons tout prévu pour vous accompagner dans votre parcours sportif, en toute sécurité et avec flexibilité.
									</p>
									<div class="btn-box">
										<a href="">
											EN SAVOIR PLUS
										</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
			{% endblock %}

			<!-- info section and footer -->
			{% block footer %}
				<!-- info section -->
				<section class="info_section layout_padding2">
					<div class="container">
						<div class="info_items">
							<a href="">
								<div class="item">
									<div class="img-box box-1">
										<img src="{{ asset('img/location-white.png') }}" alt="">
									</div>
									<div class="detail-box">
										<p>
											Tunisia, Tunis
										</p>
									</div>
								</div>
							</a>
							<a href="">
								<div class="item">
									<div class="img-box box-2">
										<img src="{{ asset('img/telephone-white.png') }}" alt="">
									</div>
									<div class="detail-box">
										<p>
											+216 123456789
										</p>
									</div>
								</div>
							</a>
							<a href="">
								<div class="item">
									<div class="img-box box-3">
										<img src="{{ asset('img/envelope-white.png') }}" alt="">
									</div>
									<div class="detail-box">
										<p>
											sporthive@gmail.com
										</p>
									</div>
								</div>
							</a>
						</div>
					</div>
				</section>
				<!-- end info_section -->

				<!-- footer section -->
				<footer class="container-fluid footer_section">
					<p>
						&copy; 2025 All Rights Reserved.
					</p>
				</footer>
				<!-- footer section -->
			{% endblock %}

			{% block javascripts %}
				<!-- jQuery -->
				<script src="{{ asset('js/jquery-3.4.1.min.js') }}"></script>
				<!-- bootstrap js -->
				<script src="{{ asset('js/bootstrap.js') }}"></script>
				<!-- custom js -->
				<script src="{{ asset('js/custom.js') }}"></script>
				<!-- Google Map -->
				<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap"></script>
				<!-- End Google Map -->
			{% endblock %}

			<!-- Chat Bot -->
			<div class="chat-wrapper">
				<button id="chat-button" title="Ouvrir le chat">
					<i class="fas fa-comments"></i>
				</button>
				<div id="chat-container">
					<div id="chat-header">
						<i class="fas fa-robot mr-2"></i>
						Assistant SPORTHIVE
					</div>
					<div id="chat-box"></div>
					<div id="chat-input">
						<input type="text" id="user-message" placeholder="Posez votre question..." autocomplete="off">
						<button id="send-btn">
							<i class="fas fa-paper-plane"></i>
						</button>
					</div>
				</div>
			</div>

			{% block js %}
				<script>
					let lastEquipeId = null;

$(document).ready(function () { // On récupère l'ID actuel le plus élevé
$.get("{{ path('check_latest_equipe') }}", function (data) {
lastEquipeId = data.id;
});

// Vérification toutes les 5 secondes
setInterval(function () {
$.get("{{ path('check_latest_equipe') }}", function (data) {
if (data.id > lastEquipeId) {
showNotification("Nouvelle équipe ajoutée : " + data.nom);
lastEquipeId = data.id;
}
});
}, 5000);
});

function showNotification(message) {
let notif = $('<div></div>', {
text: message,
css: {
position: 'fixed',
top: '20px',
right: '20px',
background: '#17a2b8',
color: '#fff',
padding: '15px 25px',
'border-radius': '8px',
'box-shadow': '0 4px 10px rgba(0,0,0,0.2)',
'z-index': 9999,
'font-weight': 'bold'
}
}).hide().fadeIn();

$('body').append(notif);

setTimeout(function () {
notif.fadeOut(function () {
$(this).remove();
});
}, 6000);
}
				</script>

				<script>
					$(document).ready(function () {
$("#chat-button").click(function () {
$("#chat-container").fadeToggle();
});

$("#send-btn").click(function () {
sendMessage();
});

$("#user-message").keypress(function (e) {
if (e.which == 13) {
sendMessage();
}
});

function sendMessage() {
var userMessage = $("#user-message").val().trim();
if (userMessage === "") 
return;


$("#chat-box").append('<div class="message user-message">' + userMessage + '</div>');
$("#user-message").val("");
$("#chat-box").scrollTop($("#chat-box")[0].scrollHeight);

$.ajax({
url: "{{ path('chatbot_gemini') }}",
type: "POST",
data: {
message: userMessage
},
dataType: "json",
success: function (response) {
$("#chat-box").append('<div class="message bot-message">' + response.bot + '</div>');
$("#chat-box").scrollTop($("#chat-box")[0].scrollHeight);
},
error: function () {
$("#chat-box").append('<div class="message bot-message">Erreur de connexion au chatbot.</div>');
}
});
}
});
				</script>
			{% endblock %}
		</body>
	</html>
